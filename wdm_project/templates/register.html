{% extends 'Base.html' %}
{% load static %}


{% block content %}
    <div class="pagemain">

        <div class="bgimg">
            <div class="pc_regiter">
                <h4>用户注册</h4>
                <form id="formRegiter" class="captcha_box" name="register" action="{% url 'users:register' %}" method="post">
                    {% csrf_token %}
                    {#		<div id="box_bd_yzm">#}
                    {#		<p>请输入以下验证码</p>#}
                    {#		<div><input id="cp" type="text" style="float:left" placeholder="验证码"><img id="code" src="./signup_files/captcha.php" title="点击验证码，换一张。" onclick="this.src=&#39;captcha.php?sms_login=1&amp;&#39;+Math.random()"></div>#}
                    {#		<a id="check_captcha" class="code_but" onclick="sendSms()" href="http://www.wdmcake.cn/user.php?act=register#">确认</a></div>#}
                    <input name="act" type="hidden" value="act_register">
                    <input type="hidden" name="back_act" value="">
                    <input type="hidden" name="reg_mode" value="2">
                    <ul class="form_list">
                        <li><input type="text" placeholder="请输入您的手机号" name="username" id="mobile_phone" >{% for error in form.username.errors %}<span>{{ error }}</span>{% endfor %}</li>
                        {#	<li class="two_col"><input type="text" id="sms_code" name="sms_code" placeholder="请输入短信验证码"><input type="button" id="get_phoneyzm" value="获取短信验证码"></li>#}
                        <li><input type="password" placeholder="请输入6位以上密码" name="password_hash" id="password_hash1">{% for error in form.password_hash.errors %}<span>{{ error }}</span>{% endfor %}</li>
                        <li><input type="password" name="confirm_password" id="confirm_password1" placeholder="确认密码">{% for error in form.confirm_password.errors %}<span>{{ error }}</span>{% endfor %}</li>
                        <li><input type="submit" value="注 册"></li>
                    </ul>
                </form>
                <p class="regtips">
                    温馨提示：<br>
                    成功注册会员，登录后首次完善个人信息，即可获赠官网会员20积分
                </p>
            </div>
            <style>

                #formRegiter .error1 {
                    border: 1px dotted red;
                    float: left;
                }
            </style>
{#            <script type="text/javascript" language="javascript">#}
{#                $(document).ready(function () {#}
{#                    //显示图片验证码#}
{#                    $("#get_phoneyzm").click(function () {#}
{#                        $("#box_bd_yzm").css('display', 'block');#}
{#                        $("#code").attr('src', 'captcha.php?sms_login=1&' + Math.random());#}
{#                    });#}
{#                })#}
{#                $('#formRegiter').submit(function () {#}
{#                    if (validate("all") == false) {#}
{#                        return false#}
{#                    }#}
{#                    $(this).ajaxSubmit({#}
{#                        url: 'user.php?is_ajax=1',#}
{#                        dataType: 'json',#}
{#                        success: user_register_success#}
{#                    })#}
{#                    return false;#}
{#                });#}
{##}
{#                //手机动态码登录#}
{#                function sendSms() {#}
{#                    var mobile = $("#mobile_phone").val();#}
{#                    var pic_code = $("#cp").val();#}
{#                    if (verifymobile(mobile) == false) {#}
{#                        jAlert('请填写正确的手机号码')#}
{#                        return false#}
{#                    }#}
{#                    $.ajax({#}
{#                        type: "post",#}
{#                        url: "user.php?act=MobileVerif",#}
{#                        data: "mobile=" + mobile + "&type=3&pic_code=" + pic_code + "&is_ex=1",#}
{#                        dataType: "json",#}
{#                        success: function (data) {#}
{#                            if (data.error == 0) {#}
{#                                $("#MobileCode").show();#}
{#                                $("#mlog").removeAttr("disabled")#}
{#                                $("#mlog").removeClass('hui');#}
{#                                $("#get_phoneyzm").attr("disabled", "false");#}
{#                                //倒计时60秒#}
{#                                var wait = 60;#}
{#                                $("#get_phoneyzm").val((--wait) + "秒后重新发送");#}
{#                                var time_line = setInterval(function () {#}
{#                                    if (wait == 0) {#}
{#                                        $("#get_phoneyzm").removeAttr("disabled");#}
{#                                        $("#get_phoneyzm").val("获取手机验证码");#}
{#                                        return clearInterval(time_line);#}
{#                                    } else {#}
{#                                        $("#get_phoneyzm").val((--wait) + "秒后重新发送");#}
{#                                    }#}
{#                                }, 1000);#}
{#                                $("#box_bd_yzm").css('display', 'none');#}
{#                            } else {#}
{#                                alert(data.msg);#}
{#                                $("#MobileCode").hide();#}
{#                            }#}
{#                        }#}
{#                    })#}
{#                }#}
{##}
{#                //手机号验证#}
{#                function verifymobile(mobile) {#}
{#                    var phone = /^13[0-9]{1}[0-9]{8}$|15[0-9]{1}[0-9]{8}$|18[0-9]{1}[0-9]{8}$|17[0-9]{9}$/;#}
{#                    if (!phone.test(mobile)) {#}
{#                        return false#}
{#                    }#}
{#                }#}
{##}
{#                function exisitMoblie(mobile) {#}
{#                    if (verifymobile(mobile) == false) {#}
{#                        alert('请填写正确的手机号码')#}
{#                        return false#}
{#                    } else {#}
{#                        $.ajax({#}
{#                            type: "post",#}
{#                            url: "user.php?act=is_exisit",#}
{#                            data: "mobile=" + mobile,#}
{#                            dataType: "json",#}
{#                            success: function (data) {#}
{#                                if (data) {#}
{#                                    alert(data.msg);#}
{#                                }#}
{#                            }#}
{#                        })#}
{#                    }#}
{#                }#}
{##}
{#                function validate(type) {#}
{#                    var err_num = 0;#}
{##}
{#                    //js表单验证手机注册#}
{#                    var val_mobile_phone = $("#mobile_phone").val();#}
{#                    if (val_mobile_phone == "") {#}
{#                        err_num++;#}
{#                        $("#mobile_phone").attr("placeholder", "手机不能为空");#}
{#                        $("#mobile_phone").attr("class", "error1");#}
{#                    } else if (!/^0?1[34578]\d{9}$/.test(val_mobile_phone)) {#}
{#                        err_num++;#}
{#                        $("#mobile_phone").attr("class", "error1");#}
{#                    } else {#}
{#                        $("#mobile_phone").attr("placeholder", "请输入您的手机号");#}
{#                        $("#mobile_phone").removeClass("error1");#}
{#                    }#}
{##}
{#                    var val_sms_code = $("#sms_code").val();#}
{#                    if (val_sms_code == "") {#}
{#                        err_num++;#}
{#                        $("#sms_code").attr("placeholder", "短信验证码不能为空");#}
{#                        $("#sms_code").attr("class", "error1");#}
{#                    } else if (!/^\d{4}$/.test(val_sms_code)) {#}
{#                        err_num++;#}
{#                        $("#sms_code").attr("class", "error1");#}
{#                    } else {#}
{#                        $("#sms_code").removeClass("error1");#}
{#                    }#}
{##}
{#                    var val_password1 = $("#password1").val();#}
{#                    if (val_password1 == "") {#}
{#                        err_num++;#}
{#                        $("#password1").attr("placeholder", "密码不能为空");#}
{#                        $("#password1").attr("class", "error1");#}
{#                    } else if (val_password1.length < 6) {#}
{#                        err_num++;#}
{#                        $("#password1").attr("class", "error1");#}
{#                    } else {#}
{#                        var m = 0;#}
{#                        var Modes = 0;#}
{#                        for (i = 0; i < val_password1.length; i++) {#}
{#                            var charType = 0;#}
{#                            var t = val_password1.charCodeAt(i);#}
{#                            if (t >= 48 && t <= 57) {#}
{#                                charType = 1;#}
{#                            } else if (t >= 65 && t <= 90) {#}
{#                                charType = 2;#}
{#                            } else {#}
{#                                charType = 4;#}
{#                            }#}
{#                            Modes |= charType;#}
{#                        }#}
{##}
{#                        for (i = 0; i < 4; i++) {#}
{#                            if (Modes & 1) m++;#}
{#                            Modes >>>= 1;#}
{#                        }#}
{##}
{#                        if (m < 2) {#}
{#                            err_num++;#}
{#                            alert("密码太简单!");#}
{#                        } else {#}
{#                            $("#password1").removeClass("error1");#}
{#                        }#}
{#                    }#}
{##}
{#                    var val_confirm_pass1 = $("#confirm_password1").val();#}
{#                    var val_pass1 = $("#password1").val();#}
{#                    if (val_confirm_pass1 == '') {#}
{#                        err_num++;#}
{#                        $("#confirm_password1").attr("placeholder", "确认密码不能为空");#}
{#                        $("#confirm_password1").attr("class", "error1");#}
{#                    } else if (val_confirm_pass1 != val_pass1) {#}
{#                        err_num++;#}
{#                        $("#confirm_password1").attr("class", "error1");#}
{#                    } else {#}
{#                        $("#confirm_password1").removeClass("error1");#}
{#                    }#}
{#                    if (err_num > 0) {#}
{#                        return false;#}
{#                    }#}
{#                    return true;#}
{#                }#}
{#            </script>#}
        </div>

    </div>
{#    <script type="text/javascript" src="{% static 'js/jquery.form.js' %}"></script>#}
{#    <script type="text/javascript" language="javascript">#}
{#        function user_register_success(res) {#}
{#            if (res.error > 0) {#}
{#                jAlert(res.msg);#}
{#            } else {#}
{#                if (res.ucdata) $("body").append(res.ucdata);#}
{#                //jAlert(res.msg,"注册成功",function(){#}
{#                if (res.back_act) {#}
{#                    location.href = res.back_act;#}
{#                } else {#}
{#                    location.href = 'user.php';#}
{#                }#}
{##}
{#                //});#}
{##}
{##}
{#            }#}
{##}
{#        }#}
{#    </script>#}




{% endblock content %}




